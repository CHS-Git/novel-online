<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lionet - 小说在线转码工具</title>
    <script src="./lib/axios.js"></script>
    <script src="./lib/vue.js"></script>
    <script src="./lib/socket.io.js"></script>
    <script src="./lib/jquery.js"></script>
</head>

<body>
    <div id="app" class="chapterPage">
        <div class="container mt-4">
            <div class="chapter ">
                <div class="wrapper">
                    <div class="alert alert-danger" v-if="errors.length">
                        <ul class="mb-0">
                            <li v-for="item in errors">
                                <b>{{ item }}</b>
                            </li>
                        </ul>
                    </div>
            
                    <div class="alert alert-info" v-if="infos.length">
                        <ul class="mb-0">
                            <li v-for="item in infos">
                                <b>{{ item }}</b>
                            </li>
                        </ul>
                    </div>
                    <template v-if="!bookType">
                        <template v-for="(item, i) in data">
                            <div class="border-bottom mb-5">
                                <h1 :id="'book-title-' + i">{{ item.title }}</h1>
                                <template v-if="item.content">
                                    <p>{{ getChapterContentLength(i) }} 字</p>
                                    <a v-if="item.cache" href="javasciprt:void(0)" @click="clearChapter">清除缓存</a>
                                </template>
                                <template v-if="!infos.length && !item.content">
                                    <p>到底啦, 没有更多章节了。</p>
                                    <a href="/index.html">返回首页</a>
                                </template>
                
                                <div class="content mt-3" v-html="item.content"></div>
                            </div>
                        </template>
                    </template>
                    <template v-else-if="currentData">
                        <div class="border-bottom mb-5">
                            <h1 :id="'book-title-' + dataIndex">{{ currentData.title }}</h1>
                            <template v-if="currentData.content">
                                <p>{{ getChapterContentLength(dataIndex) }} 字</p>
                                <a v-if="currentData.cache" href="javasciprt:void(0)" @click="clearChapter">清除缓存</a>
                            </template>
                            <template v-if="!infos.length && !currentData.content">
                                <p>到底啦, 没有更多章节了。</p>
                                <a href="/index.html">返回首页</a>
                            </template>
            
                            <div class="content mt-3" v-html="currentData.content"></div>
                        </div>
                    </template>
                    <svg v-else t="1577272216857" class="icon load" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="2629" width="200" height="200">
                        <path
                            d="M393.664871 495.52477c0 11.307533-9.168824 20.466124-20.466124 20.466124l-103.671151 0c-11.307533 0-20.466124-9.15859-20.466124-20.466124 0-11.2973 9.15859-20.466124 20.466124-20.466124l103.671151 0C384.496048 475.058646 393.664871 484.22747 393.664871 495.52477zM805.207925 495.52477c0 11.307533-9.15859 20.466124-20.466124 20.466124l-103.671151 0c-11.2973 0-20.466124-9.15859-20.466124-20.466124 0-11.2973 9.168824-20.466124 20.466124-20.466124l103.671151 0C796.049335 475.058646 805.207925 484.22747 805.207925 495.52477zM547.600823 237.917668l0 103.671151c0 11.307533-9.15859 20.466124-20.466124 20.466124s-20.466124-9.15859-20.466124-20.466124l0-103.671151c0-11.307533 9.15859-20.466124 20.466124-20.466124C538.442232 217.451544 547.600823 226.610134 547.600823 237.917668zM547.600823 649.460722l0 103.681384c0 11.2973-9.15859 20.466124-20.466124 20.466124s-20.466124-9.168824-20.466124-20.466124l0-103.681384c0-11.2973 9.15859-20.466124 20.466124-20.466124C538.442232 628.994598 547.600823 638.163421 547.600823 649.460722zM411.562497 428.754041c-3.786233 6.569626-10.673084 10.233062-17.733896 10.233062-3.479241 0-6.999414-0.880043-10.222829-2.742461l-89.774653-51.861158c-9.782807-5.658883-13.129019-18.173918-7.480368-27.956725 5.658883-9.79304 18.173918-13.139252 27.956725-7.490601l89.774653 51.861158C413.864936 406.456199 417.22138 418.971234 411.562497 428.754041zM767.918647 634.633015c-3.796466 6.559393-10.673084 10.233062-17.744129 10.233062-3.469008 0-6.989181-0.890276-10.212596-2.752694l-89.774653-51.861158c-9.782807-5.64865-13.139252-18.173918-7.480368-27.956725 5.64865-9.79304 18.173918-13.139252 27.956725-7.480368l89.774653 51.861158C770.221086 612.32494 773.567297 624.850208 767.918647 634.633015zM673.723312 282.70778l-51.861158 89.76442c-3.786233 6.559393-10.673084 10.233062-17.744129 10.233062-3.469008 0-6.989181-0.890276-10.212596-2.752694-9.79304-5.64865-13.139252-18.163685-7.480368-27.956725l51.861158-89.76442c5.64865-9.79304 18.163685-13.139252 27.956725-7.490601C676.025751 260.399705 679.382195 272.91474 673.723312 282.70778zM467.854571 639.053698l-51.861158 89.774653c-3.796466 6.559393-10.673084 10.233062-17.744129 10.233062-3.479241 0-6.999414-0.890276-10.222829-2.752694-9.782807-5.658883-13.139252-18.173918-7.480368-27.956725l51.861158-89.774653c5.658883-9.782807 18.173918-13.129019 27.956725-7.480368C470.15701 616.755856 473.503221 629.27089 467.854571 639.053698zM460.435601 379.911636c-3.213181 1.862417-6.733355 2.742461-10.202363 2.742461-7.081279 0-13.957897-3.673669-17.744129-10.243295l-51.809993-89.795119c-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725 9.79304-5.64865 22.308075-2.292206 27.956725 7.500834l51.79976 89.795119C473.585085 361.747951 470.228641 374.262986 460.435601 379.911636zM666.089447 736.400816c-3.223415 1.852184-6.743588 2.742461-10.212596 2.742461-7.071046 0-13.957897-3.673669-17.744129-10.243295l-51.79976-89.805352c-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725 9.782807-5.64865 22.297842-2.281973 27.946492 7.500834l51.809993 89.805352C679.238932 718.237131 675.882488 730.752166 666.089447 736.400816zM760.499677 384.526747l-89.795119 51.809993c-3.223415 1.852184-6.743588 2.742461-10.212596 2.742461-7.071046 0-13.957897-3.673669-17.744129-10.243295-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725l89.805352-51.809993c9.782807-5.638417 22.297842-2.281973 27.946492 7.500834C773.649162 366.363062 770.292718 378.878097 760.499677 384.526747zM404.02073 590.180594l-89.805352 51.79976c-3.213181 1.862417-6.733355 2.742461-10.202363 2.742461-7.081279 0-13.957897-3.673669-17.744129-10.243295-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725l89.795119-51.79976c9.79304-5.64865 22.308075-2.292206 27.956725 7.500834S413.81377 584.531943 404.02073 590.180594z"
                            p-id="2630"></path>
                    </svg>
    
                    <div class="links mb-5 float-right" v-if="!bookType">
                        <p v-if="autoChapterFlag">加载中... 
                            <a @click="getChapterHrefClick(lastData.nextHref)" v-if="lastData.nextHref" class="ml-3" :href="nextHref">下一章</a v-if="data.prevHref">
                        </p>
                        <template v-else>
                            <a @click="getChapterHrefClick(lastData.prevHref)" v-if="lastData.prevHref" :href="prevHref">上一章</a>
                            <a @click="getChapterHrefClick(lastData.nextHref)" v-if="lastData.nextHref" class="ml-3" :href="nextHref">下一章</a v-if="data.prevHref">
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <div class="paging-info" v-if="bookType">
            <div class="nums" v-if="pagingMaxNum != 0 && pagingNum !== false">
                {{ Math.abs(pagingNum) + 1 }} / {{ pagingMaxNum }}
            </div>
            <div class="title text-secondary" v-if="currentData">
                {{ currentData.title }}
            </div>
        </div>
        
        <div class="menu-btn d-none d-md-block">
            <svg t="1588856035173" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2174" width="50" height="50"><path d="M408.8 491.5h-129c-47 0-85.3-38.2-85.3-85.3v-129c0-47 38.2-85.3 85.3-85.3h129c47 0 85.3 38.2 85.3 85.3v129c-0.1 47.1-38.3 85.3-85.3 85.3z m-129-242.7c-15.7 0-28.4 12.7-28.4 28.4v129c0 15.7 12.7 28.4 28.4 28.4h129c15.7 0 28.4-12.7 28.4-28.4v-129c0-15.7-12.7-28.4-28.4-28.4h-129zM744.2 491.5h-129c-47 0-85.3-38.2-85.3-85.3v-129c0-47 38.2-85.3 85.3-85.3h129c47 0 85.3 38.2 85.3 85.3v129c0 47.1-38.3 85.3-85.3 85.3z m-129-242.7c-15.7 0-28.4 12.7-28.4 28.4v129c0 15.7 12.7 28.4 28.4 28.4h129c15.7 0 28.4-12.7 28.4-28.4v-129c0-15.7-12.7-28.4-28.4-28.4h-129zM408.8 832h-129c-47 0-85.3-38.2-85.3-85.3v-129c0-47 38.2-85.3 85.3-85.3h129c47 0 85.3 38.2 85.3 85.3v129c-0.1 47.1-38.3 85.3-85.3 85.3z m-129-242.7c-15.7 0-28.4 12.7-28.4 28.4v129c0 15.7 12.7 28.4 28.4 28.4h129c15.7 0 28.4-12.7 28.4-28.4v-129c0-15.7-12.7-28.4-28.4-28.4h-129zM744.2 832h-129c-47 0-85.3-38.2-85.3-85.3v-129c0-47 38.2-85.3 85.3-85.3h129c47 0 85.3 38.2 85.3 85.3v129c0 47.1-38.3 85.3-85.3 85.3z m-129-242.7c-15.7 0-28.4 12.7-28.4 28.4v129c0 15.7 12.7 28.4 28.4 28.4h129c15.7 0 28.4-12.7 28.4-28.4v-129c0-15.7-12.7-28.4-28.4-28.4h-129z" p-id="2175" fill="#757575"></path></svg>
        </div>

        <div class="bar">
            <div class="screen"></div>
            <div class="content">
                <a @click="updateMenuType('list')" :class="{'text-dark': menuType == 'list'}" href="javascript:void(0);">章节列表</a> / 
                <a @click="updateMenuType('set')" :class="{'text-dark': menuType == 'set'}" href="javascript:void(0);">配置</a>

                <div v-if="menuType == 'list'" class="mt-3">
                    <a v-if="this.searchData" :href="getBookHref()">书籍详情</a>
                    <div v-if="getChapterListFlag">
                        <a @click="updateOrder('asc')" :class="{'text-dark': order == 'asc'}" href="javascript:void(0);">正序</a>
                        |
                        <a @click="updateOrder('desc')" :class="{'text-dark': order == 'desc'}" href="javascript:void(0);">倒序</a>
                        |
                        <a @click='toChapterPosition()' href="javascript:void(0);">当前章节</a>
                        <template v-if="chaptersData.cache">
                            | <a href="javascript:void(0);" @click="refreshList()">刷新列表</a>
                        </template>
                    </div>
                    <p class="mt-2" v-if="!getChapterListFlag">关闭了获取列表</p>
                    <p class="mt-2" v-else-if="loadChapterList">加载中...</p>
                    <ol :reversed="order == 'desc'" class="mt-2" v-else-if="!listError">
                        <li class="col-12" v-for="(item, key) in chaptersData.list">
                            <a :class='href == item.href ? "text-primary" : "text-secondary"' @click="getChapterHrefClick(item.href, item.title)" :id="'chapter-list-id-' + key" :href="getChapterHref(item.href)">{{ item.title }}</a>
                        </li>
                    </ol>
                    <p v-else>没有获取章节列表 <br>
                        错误的参数</p>

                    <div class="hiddenBar">
                        <svg t="1589200984359" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2166" width="30" height="30"><path d="M512 992c-264.654 0-480-215.346-480-480s215.346-480 480-480c264.676 0 480 215.346 480 480s-215.302 480-480 480zM512 73.738c-241.658 0-438.24 196.582-438.24 438.262 0 241.658 196.604 438.262 438.262 438.262 241.68 0 438.262-196.626 438.262-438.262 0-241.68-196.604-438.262-438.284-438.262zM657.026 680.916c-5.346 0-10.691-2.029-14.771-6.087l-288.982-289.026c-8.16-8.16-8.16-21.36 0-29.52s21.36-8.16 29.52 0l288.982 289.026c8.16 8.138 8.16 21.36 0 29.52-4.058 4.058-9.382 6.087-14.749 6.087zM363.92 680.938c-5.346 0-10.669-2.051-14.749-6.087-8.16-8.16-8.16-21.36 0-29.52l296.138-296.138c8.16-8.16 21.36-8.16 29.52 0 8.138 8.16 8.138 21.36 0 29.52l-296.138 296.138c-4.08 4.036-9.426 6.087-14.771 6.087z" p-id="2167" fill="#666"></path></svg>
                    </div>
                    <div class="top">回到顶部</div>
                </div>
                <div class="mt-4" v-else-if="menuType == 'set'">
                    <h2>阅读配置</h2>
                    <h4>颜色设置</h4>
                    <div @click="color = item" v-for="item in colors" :style="{'background-color': item.bg}" class="color-item">
                    </div>
                    <h4>字体大小</h4>
                    <input class="rangeMain" min='10' max='42' v-model="fontSize" type="range" name="fontSize" />
                    <p class="text-secondary mt-2">当前字体大小: {{ fontSize }}px</p>
                    <h4>字体间隙</h4>
                    <input class="rangeMain" min='10' max='42' v-model="fontBottom" type="range" name="fontSize" />
                    <p class="text-secondary mt-2">当前字体间隙: {{ fontBottom }}px</p>
                    <h4>字体缩进</h4>
                    <input class="rangeMain" min='0' max='10' v-model="fontIndent" type="range" name="fontSize" />
                    <p class="text-secondary mt-2">当前字体缩进: {{ fontIndent }}x{{fontSize}}px</p>
                    
                    <h3 class="mb-3 mt-3">字体配置</h3>
                    <div class="set-item">
                        <div class="font-items">
                            <div @click="font = item.font" class="item border" :class="{'bg-primary text-white': item.font == font}" v-for="item in fonts">
                                {{ item.name }}
                            </div>
                        </div>
                        <p class="text-secondary mt-1">字体需要下载，所以不会及时替换，等待片刻即可。</p>
                    </div>

                    <h2 class="mt-3">系统配置</h2>
                    <div class="set-item">
                        <div class="ckbx-style-11">
                            <input type="checkbox" id="autoChapter" v-model="autoChapter" name="ckbx-style-11">
                            <label for="autoChapter"></label>
                        </div>
                        <b>
                            <label for="autoChapter">自动下一章</label>
                        </b>
                        <p class="text-secondary">到达底部的时候，自动加载下一章的内容(分页模式强制启用, 无法关闭)</p>
                    </div>
                    <div class="set-item">
                        <div class="ckbx-style-11">
                            <input type="checkbox" id="bookType" v-model="bookType" name="ckbx-style-11">
                            <label for="bookType"></label>
                        </div>
                        <b>
                            <label for="bookType">阅读分页</label>
                        </b>
                        <p class="text-secondary">这是一个可能有bug的阅读分页, 切换时不会回到之前看到的地方，最好在章节开始的地方切换(仅对手机端适用)</p>
                    </div>
                    <div class="set-item">
                        <div class="ckbx-style-11">
                            <input type="checkbox" id="getChapterList" v-model='getChapterListFlag' name="ckbx-style-11">
                            <label for="getChapterList"></label>
                        </div>
                        <b>
                            <label for="getChapterList">获取章节列表</label>
                        </b>
                        <p class="text-secondary">关闭可以减轻服务器负担，增加加载速度</p>
                    </div>
                    <div class="set-item">
                        <div class="ckbx-style-11">
                            <input type="checkbox" id="getChapterScrollTop" v-model='getChapterScrollTopFlag' name="ckbx-style-11">
                            <label for="getChapterScrollTop"></label>
                        </div>
                        <b>
                            <label for="getChapterScrollTop">记忆的地方</label>
                        </b>
                        <p class="text-secondary">进入章节页的时候回滚到之前看到的地方</p>
                    </div>
                    <div class="set-item">
                        <div class="ckbx-style-11">
                            <input type="checkbox" id="debug-btn" v-model='debug' name="ckbx-style-11">
                            <label for="debug-btn"></label>
                        </div>
                        <b>
                            <label for="debug">开启debug</label>
                        </b>
                        <p class="text-secondary">可能出现一些错误，打开查看</p>
                    </div>

                    <!-- <h2>自定义CSS</h2>
                    <div class="set-item">
                        <textarea class="form-control" id="" cols="30" rows="10"></textarea>
                    </div> -->
                </div>
            </div>
        </div>
        
		<button @click="addBookshelf" class="btn addBookshelf" :class="isStore ? 'btn-danger' : 'btn-success'">
            <span class="vam" v-if="loadBookShelf">{{ isStore ? '已在' : '加入' }}书架</span> 
            <svg v-else t="1577272216857" class="icon chapterLoad" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="2629" width="25" height="25">
                <path
                    fill='#fff'
                    d="M393.664871 495.52477c0 11.307533-9.168824 20.466124-20.466124 20.466124l-103.671151 0c-11.307533 0-20.466124-9.15859-20.466124-20.466124 0-11.2973 9.15859-20.466124 20.466124-20.466124l103.671151 0C384.496048 475.058646 393.664871 484.22747 393.664871 495.52477zM805.207925 495.52477c0 11.307533-9.15859 20.466124-20.466124 20.466124l-103.671151 0c-11.2973 0-20.466124-9.15859-20.466124-20.466124 0-11.2973 9.168824-20.466124 20.466124-20.466124l103.671151 0C796.049335 475.058646 805.207925 484.22747 805.207925 495.52477zM547.600823 237.917668l0 103.671151c0 11.307533-9.15859 20.466124-20.466124 20.466124s-20.466124-9.15859-20.466124-20.466124l0-103.671151c0-11.307533 9.15859-20.466124 20.466124-20.466124C538.442232 217.451544 547.600823 226.610134 547.600823 237.917668zM547.600823 649.460722l0 103.681384c0 11.2973-9.15859 20.466124-20.466124 20.466124s-20.466124-9.168824-20.466124-20.466124l0-103.681384c0-11.2973 9.15859-20.466124 20.466124-20.466124C538.442232 628.994598 547.600823 638.163421 547.600823 649.460722zM411.562497 428.754041c-3.786233 6.569626-10.673084 10.233062-17.733896 10.233062-3.479241 0-6.999414-0.880043-10.222829-2.742461l-89.774653-51.861158c-9.782807-5.658883-13.129019-18.173918-7.480368-27.956725 5.658883-9.79304 18.173918-13.139252 27.956725-7.490601l89.774653 51.861158C413.864936 406.456199 417.22138 418.971234 411.562497 428.754041zM767.918647 634.633015c-3.796466 6.559393-10.673084 10.233062-17.744129 10.233062-3.469008 0-6.989181-0.890276-10.212596-2.752694l-89.774653-51.861158c-9.782807-5.64865-13.139252-18.173918-7.480368-27.956725 5.64865-9.79304 18.173918-13.139252 27.956725-7.480368l89.774653 51.861158C770.221086 612.32494 773.567297 624.850208 767.918647 634.633015zM673.723312 282.70778l-51.861158 89.76442c-3.786233 6.559393-10.673084 10.233062-17.744129 10.233062-3.469008 0-6.989181-0.890276-10.212596-2.752694-9.79304-5.64865-13.139252-18.163685-7.480368-27.956725l51.861158-89.76442c5.64865-9.79304 18.163685-13.139252 27.956725-7.490601C676.025751 260.399705 679.382195 272.91474 673.723312 282.70778zM467.854571 639.053698l-51.861158 89.774653c-3.796466 6.559393-10.673084 10.233062-17.744129 10.233062-3.479241 0-6.999414-0.890276-10.222829-2.752694-9.782807-5.658883-13.139252-18.173918-7.480368-27.956725l51.861158-89.774653c5.658883-9.782807 18.173918-13.129019 27.956725-7.480368C470.15701 616.755856 473.503221 629.27089 467.854571 639.053698zM460.435601 379.911636c-3.213181 1.862417-6.733355 2.742461-10.202363 2.742461-7.081279 0-13.957897-3.673669-17.744129-10.243295l-51.809993-89.795119c-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725 9.79304-5.64865 22.308075-2.292206 27.956725 7.500834l51.79976 89.795119C473.585085 361.747951 470.228641 374.262986 460.435601 379.911636zM666.089447 736.400816c-3.223415 1.852184-6.743588 2.742461-10.212596 2.742461-7.071046 0-13.957897-3.673669-17.744129-10.243295l-51.79976-89.805352c-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725 9.782807-5.64865 22.297842-2.281973 27.946492 7.500834l51.809993 89.805352C679.238932 718.237131 675.882488 730.752166 666.089447 736.400816zM760.499677 384.526747l-89.795119 51.809993c-3.223415 1.852184-6.743588 2.742461-10.212596 2.742461-7.071046 0-13.957897-3.673669-17.744129-10.243295-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725l89.805352-51.809993c9.782807-5.638417 22.297842-2.281973 27.946492 7.500834C773.649162 366.363062 770.292718 378.878097 760.499677 384.526747zM404.02073 590.180594l-89.805352 51.79976c-3.213181 1.862417-6.733355 2.742461-10.202363 2.742461-7.081279 0-13.957897-3.673669-17.744129-10.243295-5.64865-9.79304-2.292206-22.308075 7.500834-27.956725l89.795119-51.79976c9.79304-5.64865 22.308075-2.292206 27.956725 7.500834S413.81377 584.531943 404.02073 590.180594z"
                    p-id="2630"></path>
            </svg>
        </button>
    </div>
</body>

</html>